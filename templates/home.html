<main class="home-container">

    <header class="home-header">
        <div class="globe">
            <img src="{{ url_for('static', filename='vector-logo.svg') }}" class="globe-vector" alt="Golden Globe">
        </div>
        <h2 class="tagline">Initiate. Innovate. Inspire.</h2>
        <h3 class="event-name">OM MUN 2025</h3>
    </header>

    <section class="home-box">

        {% if delegate %}
            {% if delegate.scanned_by %}
                <p>â‰ï¸ Already registered!</p>
            {% else %}
                <p>âœ… Attendance ready to log!</p>
            {% endif %}

            <dl class="delegate-info">
                <dt>Name:</dt> <dd>{{ delegate['name'] }}</dd>
                <dt>Country:</dt> <dd>{{ delegate['country'] }}</dd>
                <dt>Committee:</dt> <dd>{{ delegate['committee'] }}</dd>
                <dt>Liability Form:</dt> <dd>{{ delegate['liability_form'] }}</dd>
                <dt>Transport Form:</dt> <dd>{{ delegate['transport_form'] }}</dd>
                {% if delegate.scanned_by %}
                    <dt>Scanned by:</dt> <dd>{{ delegate['scanned_by'] }}</dd>
                    <dt>Time:</dt> <dd>{{ delegate['timestamp'] }}</dd>
                {% endif %}
            </dl>

            {% if not delegate.scanned_by %}
                <form action="/validate/{{ delegate_id }}" method="POST">
                    <button type="submit" class="validate-button">âœ… Validate Attendance</button>
                </form>
            {% endif %}

        {% else %}
            <h1>Welcome, {{ oc_id }}!</h1>
            <p>ğŸ¯ Scan delegate QR codes to track attendance.</p>

            <form action="/manual_scan" method="POST" class="manual-form">
                <input type="text" name="delegate_id" placeholder="Enter Delegate ID manually" required>
                <button type="submit" class="validate-button">ğŸ“¥ Manual Scan</button>
            </form>

            <p style="margin-top:15px;">
                <a href="/refresh_cache" class="validate-button">ğŸ”„ Refresh Cache</a>
            </p>
        {% endif %}

        <div class="actions">
            {% if pending_count > 0 %}
                <p>ğŸ•’ Pending attendance records: {{ pending_count }}</p>
                <a href="/flush" class="validate-button">ğŸ’¾ Flush to Sheets</a>
            {% endif %}
            <a href="/logout" class="logout-button">ğŸšª Logout</a>
        </div>

    </section>

</main>
